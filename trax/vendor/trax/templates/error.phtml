<html>
<head>
  <title><?php echo $error_heading ?></title>
  <style>
    body { background-color: #fff; color: #333; }

    body, p {
      font-family: verdana, arial, helvetica, sans-serif;
      font-size:   13px;
      line-height: 18px;
    }

    pre {
      background-color: #eee;
      padding: 10px;
      font-size: 11px;
      width: 98%;
    }

    a { color: #000; }
    a:visited { color: #666; }
    a:hover { color: #fff; background-color:#000; }
  </style>
  <script language="javascript">
    <!-- Activating cloaking device

    function expandContract(divName) {
        var div = document.getElementById(divName);
        if(div.style.display == 'block') {
            div.style.display = 'none';
        } else {
            div.style.display = 'block';
        }
        return false;
    }

    // Deactivating cloaking device -->
  </script>
</head>
<body>

<h1><?php echo $error_heading ?></h1>

<p><pre><?php echo $error_message ?></pre></p>

<?php if($trace): ?>
<a href="#" onclick="expandContract('framework_trace');return false;">Show framework trace</a>
<pre id="framework_trace" style="display:none"><code><?php echo $trace ?></code></pre>
<?php endif; ?>

<?php if(count(ActiveRecord::$query_log)): ?>
<p><a href="#" onclick="expandContract('sql_trace');return false;">Show SQL trace</a>
<pre id="sql_trace" style="display:none">
<code style="word-wrap: break-word;">
<?php $i = 0 ?>
<?php foreach(array_reverse(ActiveRecord::$query_log) as $query): ?>
#<?php echo $i++ ?> <?php echo $query."\n" ?>
<?php endforeach; ?>
</code>
</pre>
<?php endif; ?>

<p><a href="#" onclick="expandContract('session_dump');return false;">Show $_SESSION dump</a></p>
<div id="session_dump" style="display:none"><pre class='debug_dump'>
<?php echo print_r($_SESSION, true) ?>
</pre></div>

<p><a href="#" onclick="expandContract('get_dump');return false;">Show $_GET dump</a></p>
<div id="get_dump" style="display:none"><pre class='debug_dump'>
<?php echo print_r($_GET, true) ?>
</pre></div>

<p><a href="#" onclick="expandContract('post_dump');return false;">Show $_POST dump</a></p>
<div id="post_dump" style="display:none"><pre class='debug_dump'>
<?php echo print_r($_POST, true) ?>
</pre></div>

<p><a href="#" onclick="expandContract('cookie_dump');return false;">Show $_COOKIE dump</a></p>
<div id="cookie_dump" style="display:none"><pre class='debug_dump'>
<?php echo print_r($_COOKIE, true) ?>
</pre></div>

<p><a href="#" onclick="expandContract('file_dump');return false;">Show $_FILES dump</a></p>
<div id="file_dump" style="display:none"><pre class='debug_dump'>
<?php echo print_r($_FILES, true) ?>
</pre></div>

<br>

</body>
</html>